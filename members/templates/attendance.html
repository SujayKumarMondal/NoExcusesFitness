{% extends 'base.html' %}
{% block content %}
<div class="container" style="margin-top: 3%">
    <h2>Mark Attendance</h2>
    <form method="POST">
        {% csrf_token %}
        <div class="form-group" style="width: 200px;>
            {{ form.member.label_tag }}  <!-- Use the member field -->
            {{ form.member }}  <!-- Render the dropdown for Member -->
        </div>
        <div class="form-group d-flex align-items-center">
            {{ form.date.label_tag }}
            <input type="date" name="date" class="form-control form-control-sm ml-2" id="id_date" value="{{ form.date.value }}" style="width: 200px;">
        </div>
        <div class="form-group" style="width: 200px;>
            {{ form.status.label_tag }}
            {{ form.status }}
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <hr>
    <h2>Attendance Records</h2>
    <div class="d-flex justify-content-between">
        <h4>Records</h4>
        <form method="GET" class="form-inline">
            <input type="date" name="filter_date" class="form-control form-control-sm" id="filter_date" value="{{ filter_date }}" style="width: 200px;">
            <button type="submit" class="btn btn-secondary btn-sm ml-2">Filter</button>
        </form>
    </div>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Member</th>  <!-- Updated column name -->
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for record in attendance_records %}
            <tr>
                <td>{{ record.member.first_name }} {{ record.member.last_name }}</td>  <!-- Display Member name -->
                <td>{{ record.date }}</td>
                <td>{{ record.status }}</td>
                <td>
                    <a href="{% url 'edit_attendance' record.id %}" class="btn btn-warning btn-sm">Edit</a>
                    <span>Record ID: {{ record.id }}</span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}